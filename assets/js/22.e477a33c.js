(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{522:function(s,a,t){"use strict";t.r(a);var n=t(21),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img.whalenas.com:283/image/20210123153642.png",alt:"架构图"}})]),s._v(" "),t("h2",{attrs:{id:"使用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[s._v("#")]),s._v(" 使用示例")]),s._v(" "),t("p",[s._v("根据对应的操作系统及架构，从 Release 页面下载最新版本的程序。")]),s._v(" "),t("p",[s._v("将 frps 及 frps.ini 放到具有公网 IP 的机器上。")]),s._v(" "),t("p",[s._v("将 frpc 及 frpc.ini 放到处于内网环境的机器上。")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("推荐直接使用Docker部署")])])]),s._v(" "),t("h3",{attrs:{id:"通过-ssh-访问公司内网机器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过-ssh-访问公司内网机器"}},[s._v("#")]),s._v(" 通过 ssh 访问公司内网机器")]),s._v(" "),t("ol",[t("li",[s._v("通过 ssh 访问公司内网机器")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("启动 frps")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frps -c ./frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("修改 "),t("code",[s._v("frpc.ini")]),s._v(" 文件，假设 "),t("code",[s._v("frps")]),s._v(" 所在服务器的公网 IP 为 x.x.x.x")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("启动 frpc")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frpc -c ./frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("通过 ssh 访问内网机器，假设用户名为 test")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -oPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" test@x.x.x.x\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"通过自定义域名访问部署于内网的-web-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过自定义域名访问部署于内网的-web-服务"}},[s._v("#")]),s._v(" 通过自定义域名访问部署于内网的 web 服务")]),s._v(" "),t("p",[s._v("有时想要让其他人通过域名访问或者测试我们在本地搭建的 web 服务，但是由于本地机器没有公网 IP，\n无法将域名解析到本地的机器，通过 frp 就可以实现这一功能，以下示例为 http 服务，https\n服务配置方法相同， vhost_http_port 替换为 vhost_https_port， type 设置为 https 即可。")]),s._v(" "),t("ol",[t("li",[s._v("修改 "),t("code",[s._v("frps.ini")]),s._v(" 文件，设置 http 访问端口为 8080")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\nvhost_http_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("启动 frps")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frps -c ./frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("修改 "),t("code",[s._v("frpc.ini")]),s._v(" 文件，假设 frps 所在的服务器的 IP 为 x.x.x.x，local_port 为\n本地机器上 web 服务对应的端口, 绑定自定义域名 "),t("code",[s._v("www.yourdomain.com")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" www.yourdomain.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("启动 frpc")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frpc -c ./frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("将 "),t("code",[s._v("www.yourdomain.com")]),s._v(" 的域名 A 记录解析到 IP x.x.x.x，如果服务器已经有对应的域名，\n也可以将 CNAME 记录解析到服务器原先的域名")]),s._v(" "),t("li",[s._v("通过浏览器访问 "),t("code",[s._v("http://www.yourdomain.com:8080")]),s._v(" 即可访问到处于内网机器上的 web 服务")])]),s._v(" "),t("h3",{attrs:{id:"转发-dns-查询请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#转发-dns-查询请求"}},[s._v("#")]),s._v(" 转发 DNS 查询请求")]),s._v(" "),t("p",[s._v("DNS查询请求通常使用 UDP 协议，frp 支持对内网 UDP 服务的穿透，配置方式和 TCP 基本一致。")]),s._v(" "),t("ol",[t("li",[s._v("修改 "),t("code",[s._v("frps.ini")]),s._v(" 文件：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("启动 frps：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frps -c ./frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("修改 "),t("code",[s._v("frpc.ini")]),s._v(" 文件，设置 frps 所在服务器的 IP 为 x.x.x.x，转发到 Google 的\nDNS 查询服务器 "),t("code",[s._v("8.8.8.8")]),s._v(" 的 udp 53 端口：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dns"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" udp\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".8.8\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("53")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("启动 frpc：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./frpc -c ./frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("通过 dig 测试 UDP 包转发是否成功，预期会返回 "),t("code",[s._v("www.google.com")]),s._v(" 域名的解析结果：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dig")]),s._v(" @x.x.x.x -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" www.google.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"转发-unix域套接字"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#转发-unix域套接字"}},[s._v("#")]),s._v(" 转发 Unix域套接字")]),s._v(" "),t("p",[s._v("通过 tcp 端口访问内网的 unix域套接字(例如和 docker daemon 通信)。")]),s._v(" "),t("p",[s._v("frps 的部署步骤同上。")]),s._v(" "),t("ol",[t("li",[s._v("启动 frpc，启用 "),t("code",[s._v("unix_domain_socket")]),s._v(" 插件，配置如下：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("unix_domain_socket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\nplugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" unix_domain_socket\nplugin_unix_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/docker.sock\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过 curl 命令查看 docker 版本信息")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://x.x.x.x:6000/version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"对外提供简单的文件访问服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#对外提供简单的文件访问服务"}},[s._v("#")]),s._v(" 对外提供简单的文件访问服务")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("static_file")]),s._v(" 插件可以对外提供一个简单的基于 HTTP 的文件访问服务。")]),s._v(" "),t("p",[s._v("frps 的部署步骤同上。")]),s._v(" "),t("ol",[t("li",[s._v("启动 frpc，启用 "),t("code",[s._v("static_file")]),s._v(" 插件，配置如下：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test_static_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\nplugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" static_file\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要对外暴露的文件目录")]),s._v("\nplugin_local_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp/file\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问 url 中会被去除的前缀，保留的内容即为要访问的文件路径")]),s._v("\nplugin_strip_prefix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" static\nplugin_http_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\nplugin_http_passwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过浏览器访问 "),t("code",[s._v("http://x.x.x.x:6000/static/")]),s._v(" 来查看位于 "),t("code",[s._v("/tmp/file")]),s._v(" 目录下的文件，会要求输入已设置好的用户名和密码。")])]),s._v(" "),t("h3",{attrs:{id:"为本地http服务启用-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为本地http服务启用-https"}},[s._v("#")]),s._v(" 为本地HTTP服务启用 HTTPS")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("https2http")]),s._v(" 插件可以让本地 HTTP 服务转换成 HTTPS 服务对外提供。")]),s._v(" "),t("ol",[t("li",[s._v("启用 frpc，启用 "),t("code",[s._v("https2http")]),s._v(" 插件，配置如下:")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test_htts2http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\n\nplugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https2http\nplugin_local_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:80\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTPS 证书相关的配置")]),s._v("\nplugin_crt_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ./server.crt\nplugin_key_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ./server.key\nplugin_host_header_rewrite "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过浏览器访问 "),t("code",[s._v("https://test.yourdomain.com")]),s._v(" 即可。")])]),s._v(" "),t("h3",{attrs:{id:"安全地暴露内网服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安全地暴露内网服务"}},[s._v("#")]),s._v(" 安全地暴露内网服务")]),s._v(" "),t("p",[s._v("对于某些服务来说如果直接暴露于公网上将会存在安全隐患。")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("stcp(secret tcp)")]),s._v(" 类型的代理可以避免让任何人都能访问到要穿透的服务，但是访问者也需要运行另外一个 frpc。")]),s._v(" "),t("p",[s._v("以下示例将会创建一个只有自己能访问到的 ssh 服务代理。")]),s._v(" "),t("p",[s._v("frps 的部署步骤同上。")]),s._v(" "),t("ol",[t("li",[s._v("启动 frpc，转发内网的 ssh 服务，配置如下，不需要指定远程端口：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("secret_ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只有 sk 一致的用户才能访问到此服务")]),s._v("\nsk "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abcdefg\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在要访问这个服务的机器上启动另外一个 frpc，配置如下")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("secret_ssh_visitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stcp 的访问者")]),s._v("\nrole "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" visitor\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要访问的 stcp 代理的名字")]),s._v("\nserver_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" secret_ssh\nsk "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abcdefg\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 绑定本地端口用于访问 ssh 服务")]),s._v("\nbind_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("通过 ssh 访问内网机器，假设用户名为 test")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -oPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" test@127.0.0.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"点对点内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#点对点内网穿透"}},[s._v("#")]),s._v(" 点对点内网穿透")]),s._v(" "),t("p",[s._v("frp 提供了一种新的代理类型 "),t("code",[s._v("xtcp")]),s._v(" 用于应对在希望传输大量数据且流量不经过服务器的场景。")]),s._v(" "),t("p",[s._v("使用方式同 "),t("code",[s._v("stcp")]),s._v(" 类似，需要在两边都部署上 frpc 用于建立直接的连接。")]),s._v(" "),t("p",[s._v("目前处于开发的初级阶段，并不能穿透所有类型的 NAT 设备，所以穿透成功率较低。穿透失败时可以尝试 "),t("code",[s._v("stcp")]),s._v(" 的方式。")]),s._v(" "),t("ol",[t("li",[s._v("frps 除正常配置外需要额外配置一个 udp 端口用于支持该类型的客户端")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("bind_udp_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7001")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("启动 frpc，转发内网的 ssh 服务，配置如下，不需要指定远程端口")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p2p_ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" xtcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只有 sk 一致的用户才能访问到此服务")]),s._v("\nsk "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abcdefg\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("在要访问这个服务的机器上启动另外一个 frpc，配置如下:")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p2p_ssh_visitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" xtcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xtcp 的访问者")]),s._v("\nrole "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" visitor\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要访问的 xtcp 代理的名字")]),s._v("\nserver_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" p2p_ssh\nsk "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abcdefg\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 绑定本地端口用于访问 ssh 服务")]),s._v("\nbind_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("通过 ssh 访问内网机器，假设用户名为 test:")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -oPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" test@127.0.0.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"功能说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能说明"}},[s._v("#")]),s._v(" 功能说明")]),s._v(" "),t("h3",{attrs:{id:"配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),t("p",[s._v("由于 frp 目前支持的功能和配置项较多，未在文档中列出的功能可以从完整的示例配置文件中发现。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/fatedier/frp/blob/dev/conf/frps_full.ini",target:"_blank",rel:"noopener noreferrer"}},[s._v("frps 完整配置文件"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/fatedier/frp/blob/dev/conf/frpc_full.ini",target:"_blank",rel:"noopener noreferrer"}},[s._v("frpc 完整配置文件"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"配置文件模版渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件模版渲染"}},[s._v("#")]),s._v(" 配置文件模版渲染")]),s._v(" "),t("p",[s._v("配置文件支持使用系统环境变量进行模版渲染，模版格式采用 Go 的标准格式。")]),s._v(" "),t("p",[s._v("示例配置如下:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Envs.FRP_SERVER_ADDR "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Envs.FRP_SSH_REMOTE_PORT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("启动 frpc 程序:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("FRP_SERVER_ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x.x.x.x"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("FRP_SSH_REMOTE_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6000"')]),s._v("\n./frpc -c ./frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("frpc 会自动使用环境变量渲染配置文件模版，所有环境变量需要以 "),t("code",[s._v(".Envs")]),s._v(" 为前缀。")]),s._v(" "),t("h3",{attrs:{id:"服务端-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端-dashboard"}},[s._v("#")]),s._v(" 服务端 Dashboard")]),s._v(" "),t("p",[s._v("通过浏览器查看 frp 的状态以及代理统计信息展示。")]),s._v(" "),t("blockquote",[t("p",[s._v("注：Dashboard 尚未针对大量的 proxy 数据展示做优化，如果出现 Dashboard 访问较慢的情况，请不要启用此功能。")])]),s._v(" "),t("p",[s._v("需要在 frps.ini 中指定 dashboard 服务使用的端口，即可开启此功能")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ndashboard_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7500")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dashboard 用户名密码，默认都为 admin，如果不需要，需要主动设置为空")]),s._v("\ndashboard_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin\ndashboard_pwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("打开浏览器通过 "),t("code",[s._v("http://[server_addr]:7500")]),s._v(" 访问 dashboard 界面，用户名密码默认为 "),t("code",[s._v("admin")]),s._v("。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img.whalenas.com:283/image/20210123161231.png",alt:"Dashboard"}})]),s._v(" "),t("h3",{attrs:{id:"admin-ui"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admin-ui"}},[s._v("#")]),s._v(" Admin UI")]),s._v(" "),t("p",[s._v("Admin UI 可以帮助用户通过浏览器来查询和管理客户端的 proxy 状态和配置。")]),s._v(" "),t("p",[s._v("需要在 frpc.ini 中指定 admin 服务使用的端口，即可开启此功能：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nadmin_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nadmin_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7400")]),s._v("\nadmin_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin\nadmin_pwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("打开浏览器通过 "),t("code",[s._v("http://127.0.0.1:7400")]),s._v(" 访问 Admin UI，用户名密码默认为 "),t("code",[s._v("admin")]),s._v("。")]),s._v(" "),t("p",[s._v("如果想要在外网环境访问 Admin UI，将 "),t("code",[s._v("7400 端口")]),s._v("映射出去即可，但需要重视安全风险。")]),s._v(" "),t("h3",{attrs:{id:"身份验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#身份验证"}},[s._v("#")]),s._v(" 身份验证")]),s._v(" "),t("p",[s._v("服务端和客户端的 common 配置中的 "),t("code",[s._v("token")]),s._v(" 参数一致则身份验证通过。")]),s._v(" "),t("h3",{attrs:{id:"加密与压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加密与压缩"}},[s._v("#")]),s._v(" 加密与压缩")]),s._v(" "),t("p",[s._v("这两个功能默认是不开启的，需要在 frpc.ini 中通过配置来为指定的代理启用加密与压缩的功能，压缩算法使用 snappy")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\nuse_encryption "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nuse_compression "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("如果公司内网防火墙对外网访问进行了流量识别与屏蔽，例如禁止了 ssh 协议等，通过设置 "),t("code",[s._v("use_encryption = true")]),s._v("，将 frpc 与 frps 之间的通信内容加密传输，将会有效防止流量被拦截。")]),s._v(" "),t("p",[s._v("如果传输的报文长度较长，通过设置 "),t("code",[s._v("use_compression = true")]),s._v(" 对传输内容进行压缩，可以有效减小 frpc 与 frps 之间的网络流量，加快流量转发速度，但是会额外消耗一些 cpu 资源。")]),s._v(" "),t("p",[s._v("TLS\n从 v0.25.0 版本开始 frpc 和 frps 之间支持通过 TLS 协议加密传输。通过在 "),t("code",[s._v("frpc.ini")]),s._v(" 的 "),t("code",[s._v("common")]),s._v(" 中配置 "),t("code",[s._v("tls_enable = true")]),s._v(" 来启用此功能，安全性更高。")]),s._v(" "),t("p",[s._v("为了端口复用，frp 建立 TLS 连接的第一个字节为 0x17。")]),s._v(" "),t("blockquote",[t("p",[s._v("注意: 启用此功能后除 "),t("code",[s._v("xtcp")]),s._v(" 外，不需要再设置 "),t("code",[s._v("use_encryption")]),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"客户端热加载配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端热加载配置文件"}},[s._v("#")]),s._v(" 客户端热加载配置文件")]),s._v(" "),t("p",[s._v("当修改了 frpc 中的代理配置，可以通过 "),t("code",[s._v("frpc reload")]),s._v(" 命令来动态加载配置文件，通常会在 10 秒内完成代理的更新。")]),s._v(" "),t("p",[s._v("启用此功能需要在 frpc 中启用 admin 端口，用于提供 API 服务。配置如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nadmin_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nadmin_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7400")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("之后执行重启命令：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("frpc reload -c ./frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("等待一段时间后客户端会根据新的配置文件创建、更新、删除代理。")]),s._v(" "),t("blockquote",[t("p",[s._v("需要注意的是，"),t("code",[s._v("[common]")]),s._v(" 中的参数除了 start 外目前无法被修改。")])]),s._v(" "),t("h3",{attrs:{id:"客户端查看代理状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端查看代理状态"}},[s._v("#")]),s._v(" 客户端查看代理状态")]),s._v(" "),t("p",[s._v("frpc 支持通过 "),t("code",[s._v("frpc status -c ./frpc.ini")]),s._v(" 命令查看代理的状态信息，此功能需要在 frpc 中配置 admin 端口。")]),s._v(" "),t("h3",{attrs:{id:"端口白名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口白名单"}},[s._v("#")]),s._v(" 端口白名单")]),s._v(" "),t("p",[s._v("为了防止端口被滥用，可以手动指定允许哪些端口被使用，在 frps.ini 中通过 "),t("code",[s._v("allow_ports")]),s._v(" 来指定")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nallow_ports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("-3000,3001,3003,4000-50000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("allow_ports")]),s._v(" 可以配置允许使用的某个指定端口或者是一个范围内的所有端口，以 "),t("code",[s._v(",")]),s._v(" 分隔，指定的范围以 "),t("code",[s._v("-")]),s._v(" 分隔。")]),s._v(" "),t("h3",{attrs:{id:"端口复用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口复用"}},[s._v("#")]),s._v(" 端口复用")]),s._v(" "),t("p",[s._v("目前 frps 中的 "),t("code",[s._v("vhost_http_port")]),s._v(" 和 "),t("code",[s._v("vhost_https_port")]),s._v(" 支持配置成和 "),t("code",[s._v("bind_port")]),s._v(" 为同一个端口，frps 会对连接的协议进行分析，之后进行不同的处理。")]),s._v(" "),t("p",[s._v("例如在某些限制较严格的网络环境中，可以将 "),t("code",[s._v("bind_port")]),s._v(" 和 "),t("code",[s._v("vhost_https_port")]),s._v(" 都设置为 443。")]),s._v(" "),t("p",[s._v("后续会尝试允许多个 proxy 绑定同一个远端端口的不同协议。")]),s._v(" "),t("h3",{attrs:{id:"tcp-多路复用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-多路复用"}},[s._v("#")]),s._v(" TCP 多路复用")]),s._v(" "),t("p",[s._v("从 "),t("code",[s._v("v0.10.0")]),s._v(" 版本开始，客户端和服务器端之间的连接支持多路复用，不再需要为每一个用户请求创建一个连接，使连接建立的延迟降低，并且避免了大量文件描述符的占用，使 frp 可以承载更高的并发数。")]),s._v(" "),t("p",[s._v("该功能默认启用，如需关闭，可以在 "),t("code",[s._v("frps.ini")]),s._v(" 和 "),t("code",[s._v("frpc.ini")]),s._v(" 中配置，该配置项在服务端和客户端必须一致：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini 和 frpc.ini 中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntcp_mux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"底层通信可选-kcp-协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#底层通信可选-kcp-协议"}},[s._v("#")]),s._v(" 底层通信可选 kcp 协议")]),s._v(" "),t("p",[s._v("底层通信协议支持选择 kcp 协议，在弱网环境下传输效率提升明显，但是会有一些额外的流量消耗。")]),s._v(" "),t("p",[s._v("开启 kcp 协议支持：")]),s._v(" "),t("ol",[t("li",[s._v("在 frps.ini 中启用 kcp 协议支持，指定一个 udp 端口用于接收客户端请求")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kcp 绑定的是 udp 端口，可以和 bind_port 一样")]),s._v("\nkcp_bind_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在 frpc.ini 指定需要使用的协议类型，目前只支持 tcp 和 kcp。其他代理配置不需要变更")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_port 指定为 frps 的 kcp_bind_port")]),s._v("\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\nprotocol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" kcp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("像之前一样使用 frp，需要注意开放相关机器上的 udp 的端口的访问权限.")])]),s._v(" "),t("h3",{attrs:{id:"连接池"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接池"}},[s._v("#")]),s._v(" 连接池")]),s._v(" "),t("p",[s._v("默认情况下，当用户请求建立连接后，frps 才会请求 frpc 主动与后端服务建立一个连接。当为指定的代理启用连接池后，frp 会预先和后端服务建立起指定数量的连接，每次接收到用户请求后，会从连接池中取出一个连接和用户连接关联起来，避免了等待与后端服务建立连接以及 frpc 和 frps 之间传递控制信息的时间。")]),s._v(" "),t("p",[s._v("这一功能比较适合有大量短连接请求时开启。")]),s._v(" "),t("ol",[t("li",[s._v("首先可以在 "),t("code",[s._v("frps.ini")]),s._v(" 中设置每个代理可以创建的连接池上限，避免大量资源占用，客户端设置超过此配置后会被调整到当前值")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmax_pool_count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在 "),t("code",[s._v("frpc.ini")]),s._v(" 中为客户端启用连接池，指定预创建连接的数量")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\npool_count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"负载均衡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡"}},[s._v("#")]),s._v(" 负载均衡")]),s._v(" "),t("p",[s._v("可以将多个相同类型的 proxy 加入到同一个 group 中，从而实现负载均衡的功能。")]),s._v(" "),t("p",[s._v("目前只支持 tcp 类型的 proxy。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ngroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" web\ngroup_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ngroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" web\ngroup_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("用户连接 frps 服务器的 80 端口，frps 会将接收到的用户连接随机分发给其中一个存活的 proxy。这样可以在一台 frpc 机器挂掉后仍然有其他节点能够提供服务。")]),s._v(" "),t("p",[s._v("要求 "),t("code",[s._v("group_key")]),s._v(" 相同，做权限验证，且 "),t("code",[s._v("remote_port")]),s._v(" 相同。")]),s._v(" "),t("h3",{attrs:{id:"健康检查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#健康检查"}},[s._v("#")]),s._v(" 健康检查")]),s._v(" "),t("p",[s._v("通过给 proxy 加上健康检查的功能，可以在要反向代理的服务出现故障时，将这个服务从 frps 中摘除，搭配负载均衡的功能，可以用来实现高可用的架构，避免服务单点故障。")]),s._v(" "),t("p",[s._v("在每一个 proxy 的配置下加上 "),t("code",[s._v("health_check_type = {type}")]),s._v(" 来启用健康检查功能。")]),s._v(" "),t("p",[s._v("type 目前可选 tcp 和 http。")]),s._v(" "),t("p",[s._v("tcp 只要能够建立连接则认为服务正常，http 会发送一个 http 请求，服务需要返回 2xx 的状态码才会被认为正常。")]),s._v(" "),t("p",[s._v("tcp 示例配置如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用健康检查，类型为 tcp")]),s._v("\nhealth_check_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立连接超时时间为 3 秒")]),s._v("\nhealth_check_timeout_s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连续 3 次检查失败，此 proxy 会被摘除")]),s._v("\nhealth_check_max_failed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔 10 秒进行一次健康检查")]),s._v("\nhealth_check_interval_s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("http 示例配置如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用健康检查，类型为 http")]),s._v("\nhealth_check_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 健康检查发送 http 请求的 url，后端服务需要返回 2xx 的 http 状态码")]),s._v("\nhealth_check_url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /status\nhealth_check_interval_s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nhealth_check_max_failed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nhealth_check_timeout_s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"修改-host-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-host-header"}},[s._v("#")]),s._v(" 修改 Host Header")]),s._v(" "),t("p",[s._v("通常情况下 frp 不会修改转发的任何数据。但有一些后端服务会根据 http 请求 header 中的 host 字段来展现不同的网站，例如 nginx 的虚拟主机服务，启用 "),t("code",[s._v("host-header")]),s._v(" 的修改功能可以动态修改 http 请求中的 host 字段。该功能仅限于 http 类型的代理。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\nhost_header_rewrite "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dev.yourdomain.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("原来 http 请求中的 host 字段 "),t("code",[s._v("test.yourdomain.com")]),s._v(" 转发到后端服务时会被替换为 "),t("code",[s._v("dev.yourdomain.com")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"设置-http-请求的-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-http-请求的-header"}},[s._v("#")]),s._v(" 设置 HTTP 请求的 header")]),s._v(" "),t("p",[s._v("对于 "),t("code",[s._v("type = http")]),s._v(" 的代理，可以设置在转发中动态添加的 header 参数。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\nhost_header_rewrite "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dev.yourdomain.com\nheader_X-From-Where "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" frp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("对于参数配置中所有以 "),t("code",[s._v("header_")]),s._v(" 开头的参数(支持同时配置多个)，都会被添加到 http 请求的 header 中，根据如上的配置，会在请求的 header 中加上 "),t("code",[s._v("X-From-Where: frp")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"获取用户真实-ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取用户真实-ip"}},[s._v("#")]),s._v(" 获取用户真实 IP")]),s._v(" "),t("h4",{attrs:{id:"http-x-forwarded-for"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-x-forwarded-for"}},[s._v("#")]),s._v(" HTTP X-Forwarded-For")]),s._v(" "),t("p",[s._v("目前只有 "),t("code",[s._v("http")]),s._v(" 类型的代理支持这一功能，可以通过用户请求的 header 中的 "),t("code",[s._v("X-Forwarded-For")]),s._v(" 来获取用户真实 IP，默认启用。")]),s._v(" "),t("h4",{attrs:{id:"proxy-protocol"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proxy-protocol"}},[s._v("#")]),s._v(" Proxy Protocol")]),s._v(" "),t("p",[s._v("frp 支持通过 "),t("code",[s._v("Proxy Protocol")]),s._v(" 协议来传递经过 frp 代理的请求的真实 IP，此功能支持所有以 TCP 为底层协议的类型，不支持 UDP。")]),s._v(" "),t("p",[t("code",[s._v("Proxy Protocol")]),s._v(" 功能启用后，frpc 在和本地服务建立连接后，会先发送一段 "),t("code",[s._v("Proxy Protocol")]),s._v(" 的协议内容给本地服务，本地服务通过解析这一内容可以获得访问用户的真实 IP。所以不仅仅是 HTTP 服务，任何的 TCP 服务，只要支持这一协议，都可以获得用户的真实 IP 地址。")]),s._v(" "),t("p",[s._v("需要注意的是，在代理配置中如果要启用此功能，需要本地的服务能够支持 "),t("code",[s._v("Proxy Protocol 这一协议")]),s._v("，目前 nginx 和 haproxy 都能够很好的支持。")]),s._v(" "),t("p",[s._v("这里以 https 类型为例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目前支持 v1 和 v2 两个版本的 proxy protocol 协议。")]),s._v("\nproxy_protocol_version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" v2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("只需要在代理配置中增加一行 "),t("code",[s._v("proxy_protocol_version = v2")]),s._v(" 即可开启此功能。")]),s._v(" "),t("p",[s._v("本地的 https 服务可以通过在 nginx 的配置中启用 "),t("code",[s._v("Proxy Protocol")]),s._v(" 的解析并将结果设置在 "),t("code",[s._v("X-Real-IP")]),s._v(" 这个 Header 中就可以在自己的 Web 服务中通过 "),t("code",[s._v("X-Real-IP")]),s._v(" 获取到用户的真实 IP。")]),s._v(" "),t("h3",{attrs:{id:"通过密码保护你的-web-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过密码保护你的-web-服务"}},[s._v("#")]),s._v(" 通过密码保护你的 web 服务")]),s._v(" "),t("p",[s._v("由于所有客户端共用一个 frps 的 http 服务端口，任何知道你的域名和 url 的人都能访问到你部署在内网的 web 服务，但是在某些场景下需要确保只有限定的用户才能访问。")]),s._v(" "),t("p",[s._v("frp 支持通过 "),t("code",[s._v("HTTP Basic Auth")]),s._v(" 来保护你的 web 服务，使用户需要通过用户名和密码才能访问到你的服务。")]),s._v(" "),t("p",[s._v("该功能目前仅限于 http 类型的代理，需要在 frpc 的代理配置中添加用户名和密码的设置。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" test.yourdomain.com\nhttp_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\nhttp_pwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("通过浏览器访问 "),t("code",[s._v("http://test.yourdomain.com")]),s._v("，需要输入配置的用户名和密码才能访问。")]),s._v(" "),t("h3",{attrs:{id:"自定义二级域名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义二级域名"}},[s._v("#")]),s._v(" 自定义二级域名")]),s._v(" "),t("p",[s._v("在多人同时使用一个 frps 时，通过自定义二级域名的方式来使用会更加方便。")]),s._v(" "),t("p",[s._v("通过在 frps 的配置文件中配置 "),t("code",[s._v("subdomain_hos")]),s._v("t，就可以启用该特性。之后在 frpc 的 http、https 类型的代理中可以不配置 "),t("code",[s._v("custom_domains")]),s._v("，而是配置一个 "),t("code",[s._v("subdomai")]),s._v("n 参数。")]),s._v(" "),t("p",[s._v("只需要将 "),t("code",[s._v("*.{subdomain_host}")]),s._v(" 解析到 frps 所在服务器。之后用户可以通过 "),t("code",[s._v("subdomain")]),s._v(" 自行指定自己的 web 服务所需要使用的二级域名，通过 "),t("code",[s._v("{subdomain}.{subdomain_host}")]),s._v(" 来访问自己的 web 服务。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsubdomain_host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" frps.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("将泛域名 "),t("code",[s._v("*.frps.com")]),s._v(" 解析到 frps 所在服务器的 IP 地址。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\nsubdomain "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("frps 和 frpc 都启动成功后，通过 "),t("code",[s._v("test.frps.com")]),s._v(" 就可以访问到内网的 web 服务。")]),s._v(" "),t("blockquote",[t("p",[s._v("注：如果 frps 配置了 "),t("code",[s._v("subdomain_host")]),s._v("，则 custom_domains 中不能是属于 "),t("code",[s._v("subdomain_host")]),s._v(" 的子域名或者泛域名。")])]),s._v(" "),t("p",[s._v("同一个 http 或 https 类型的代理中 "),t("code",[s._v("custom_domains")]),s._v(" 和 "),t("code",[s._v("subdomain")]),s._v(" 可以同时配置。")]),s._v(" "),t("h3",{attrs:{id:"url-路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-路由"}},[s._v("#")]),s._v(" URL 路由")]),s._v(" "),t("p",[s._v("frp 支持根据请求的 URL 路径路由转发到不同的后端服务。")]),s._v(" "),t("p",[s._v("通过配置文件中的 "),t("code",[s._v("locations")]),s._v(" 字段指定一个或多个 proxy 能够匹配的 URL 前缀(目前仅支持最大前缀匹配，之后会考虑正则匹配)。例如指定 "),t("code",[s._v("locations = /news")]),s._v("，则所有 URL 以 "),t("code",[s._v("/news")]),s._v(" 开头的请求都会被转发到这个服务。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" web.yourdomain.com\nlocations "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web02"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("\ncustom_domains "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" web.yourdomain.com\nlocations "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /news,/about\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("按照上述的示例配置后，"),t("code",[s._v("web.yourdomain.com")]),s._v(" 这个域名下所有以 "),t("code",[s._v("/news")]),s._v(" 以及 "),t("code",[s._v("/about")]),s._v(" 作为前缀的 URL 请求都会被转发到 "),t("code",[s._v("web02")]),s._v("，其余的请求会被转发到 "),t("code",[s._v("web01")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"通过代理连接-frps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过代理连接-frps"}},[s._v("#")]),s._v(" 通过代理连接 frps")]),s._v(" "),t("p",[s._v("在只能通过代理访问外网的环境内，frpc 支持通过 "),t("code",[s._v("HTTP PROXY")]),s._v(" 和 frps 进行通信。")]),s._v(" "),t("p",[s._v("可以通过设置 "),t("code",[s._v("HTTP_PROXY")]),s._v(" 系统环境变量或者通过在 frpc 的配置文件中设置 "),t("code",[s._v("http_proxy")]),s._v(" 参数来使用此功能。")]),s._v(" "),t("p",[s._v("仅在 "),t("code",[s._v("protocol = tcp")]),s._v(" 时生效。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x.x.x.x\nserver_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\nhttp_proxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://user:pwd@192.168.1.128:8080\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"范围端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#范围端口映射"}},[s._v("#")]),s._v(" 范围端口映射")]),s._v(" "),t("p",[s._v("在 frpc 的配置文件中可以指定映射多个端口，目前只支持 tcp 和 udp 的类型。")]),s._v(" "),t("p",[s._v("这一功能通过 "),t("code",[s._v("range:")]),s._v(" 段落标记来实现，客户端会解析这个标记中的配置，将其拆分成多个 proxy，每一个 proxy 以数字为后缀命名。")]),s._v(" "),t("p",[s._v("例如要映射本地 6000-6005, 6007 这6个端口，主要配置如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("range:test_tcp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("-6006,6007\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("-6006,6007\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("实际连接成功后会创建 8 个 proxy，命名为 "),t("code",[s._v("test_tcp_0, test_tcp_1 ... test_tcp_7")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),t("p",[s._v("默认情况下，frpc 只会转发请求到本地 tcp 或 udp 端口。")]),s._v(" "),t("p",[s._v("插件模式是为了在客户端提供更加丰富的功能，目前内置的插件有 "),t("code",[s._v("unix_domain_socket")]),s._v("、"),t("code",[s._v("http_proxy")]),s._v("、"),t("code",[s._v("socks5")]),s._v("、"),t("code",[s._v("static_file")]),s._v("。")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("plugin")]),s._v(" 指定需要使用的插件，插件的配置参数都以 "),t("code",[s._v("plugin_")]),s._v(" 开头。使用插件后 "),t("code",[s._v("local_ip")]),s._v(" 和 "),t("code",[s._v("local_port")]),s._v(" 不再需要配置。")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("http_proxy")]),s._v(" 插件的示例:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("http_proxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\nplugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http_proxy\nplugin_http_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\nplugin_http_passwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" abc\nplugin_http_user 和 plugin_http_passwd 即为 http_proxy 插件可选的配置参数。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"官方地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方地址"}},[s._v("#")]),s._v(" 官方地址")]),s._v(" "),t("div",{staticClass:"cardListContainer"},[t("div",{staticClass:"card-list"},[t("a",{staticClass:"card-item row-3",staticStyle:{"background-color":"#FBDE4B","--randomColor":"#FBDE4B",color:"#fff"},attrs:{href:"https://github.com/fatedier/frp",target:"_blank"}},[t("img",{staticClass:"no-zoom",attrs:{src:"https://avatars.githubusercontent.com/u/7346661?s=400&u=721c6ac19c725486a09c728572e7aee0460e42c0&v=4"}}),s._v(" "),t("div",[t("p",{staticClass:"name"},[s._v("fatedier")]),s._v(" "),t("p",{staticClass:"desc"},[s._v("frp")])])])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fatedier\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" frp\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("avatar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//avatars.githubusercontent.com/u/7346661"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v("s=400"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("&u=721c6ac19c725486a09c728572e7aee0460e42c0&v=4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("link")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/fatedier/frp "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bgColor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#FBDE4B'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选，默认var(--bodyBg)。颜色值有#号时请添加单引号")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("textColor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#fff'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选，默认var(--textColor)")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);
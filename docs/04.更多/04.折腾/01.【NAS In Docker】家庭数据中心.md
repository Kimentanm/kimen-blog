---
title: ã€NAS In Dockerã€‘ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦å®¶åº­æ•°æ®ä¸­å¿ƒ = é—²ç½®å°å¼æœº + Docker
date: 2021-05-07 17:30:30
permalink: /pages/3426a4/
categories:
  - æ›´å¤š
  - æŠ˜è…¾
tags:
  -
author:
  name: Kimen
  link: https://github.com/Kimentanm
---

![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507172641.png)

<!-- more -->

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­æ•°æ®ä¸­å¿ƒ
|  åç§°   | æè¿°  |
|  ---  | ---  |
| Frp  | å†…ç½‘ç©¿é€  |
| Cloudreve  | ä¸ªäººè½»ç½‘ç›˜  |
| Aria2  | BTä¸‹è½½ã€ç¦»çº¿ä¸‹è½½ã€AriaNgå¯è§†åŒ–  |
| Jellyfin  | æµåª’ä½“ä¸­å¿ƒ  |
| Bitwarden  | ä¸ªäººå¯†ç ç®¡ç† |
| Netdata | Linuxæ€§èƒ½å®æ—¶ç›‘æµ‹å·¥å…· |
| Mysql 5.7  | æ•°æ®åº“  |
| Gitea  | ä»£ç ä»“åº“  |
| Nexus3  | Mavenã€NPMã€Dockerç§æœ  |
| WebDAV+Joplin  | ä¸ªäººç¬”è®°  |

## ğŸ’» å°å¼æœºé…ç½®
|  åç§°   | é…ç½®  |
|  :---:  | :---  |
| ç³»ç»Ÿ  | CentOS Linux release 7.9.2009 |
| CPU  | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz |
| ä¸»æ¿  | ASUS PRIME B250M-A |
| å†…å­˜  | ç¾å•†æµ·ç›—èˆ¹ 8GB DDR4 2400MHz |
| å›ºæ€  | SAMSUNG 256GB |
| ç¡¬ç›˜  | å¸Œæ· 1T  |

## Centoså®‰è£…Docker
è¿™éƒ¨åˆ†å°±ä¸è¿‡å¤šæè¿°äº†ï¼Œç½‘ä¸Šæœ‰ä¸€å¤§å †æ•™ç¨‹ï¼Œä¸»è¦å°±æ˜¯ä¸‹é¢è¿™ä¸ªå®‰è£…å‘½ä»¤
```bash
yum install -y docker-ce
```

## Centoså®‰è£…docker-compose
```bash
cd /usr/local/bin
# ä¸‹è½½docker-compose
wget https://github.com/docker/compose/releases/download/1.29.1/docker-compose-Linux-x86_64
# æ·»åŠ å¯æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/docker-compose
# æŸ¥çœ‹docker-composeç‰ˆæœ¬
docker-compose -v
```

## å†…ç½‘ç©¿é€
è…¾è®¯äº‘çš„è½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œç”¨å­¦ç”Ÿä¼˜æƒ 108ä¸€å¹´ï¼Œåˆæ­£å¥½ç¢°ä¸Šå…è´¹å‡é…çš„æ´»åŠ¨å‡çº§äº†ä¸€æ³¢é…ç½®ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507143615.png)
> è¿™å°æœåŠ¡å™¨ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨
> - å®‰è£…frpæœåŠ¡ç«¯ï¼Œä¸ºå†…ç½‘ç©¿é€æä¾›å¤–ç½‘åœ°å€
> - Nginx åå‘ä»£ç†ï¼ŒHttpè½¬Https

## Cloudreve ç½‘ç›˜
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507150221.png)
 - â˜ï¸ æ”¯æŒæœ¬æœºã€ä»æœºã€ä¸ƒç‰›ã€é˜¿é‡Œäº‘ OSSã€è…¾è®¯äº‘ COSã€åˆæ‹äº‘ã€OneDrive (åŒ…æ‹¬ä¸–çºªäº’è”ç‰ˆ) ä½œä¸ºå­˜å‚¨ç«¯
 - ğŸ“¤ ä¸Šä¼ /ä¸‹è½½ æ”¯æŒå®¢æˆ·ç«¯ç›´ä¼ ï¼Œæ”¯æŒä¸‹è½½é™é€Ÿ
 - ğŸ’¾ å¯å¯¹æ¥ Aria2 ç¦»çº¿ä¸‹è½½
 - ğŸ“š åœ¨çº¿ å‹ç¼©/è§£å‹ç¼©ã€å¤šæ–‡ä»¶æ‰“åŒ…ä¸‹è½½
 - ğŸ’» è¦†ç›–å…¨éƒ¨å­˜å‚¨ç­–ç•¥çš„ WebDAV åè®®æ”¯æŒ
 - âš¡ æ‹–æ‹½ä¸Šä¼ ã€ç›®å½•ä¸Šä¼ ã€æµå¼ä¸Šä¼ å¤„ç†
 - ğŸ—ƒï¸ æ–‡ä»¶æ‹–æ‹½ç®¡ç†
 - ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å¤šç”¨æˆ·ã€ç”¨æˆ·ç»„
 - ğŸ”— åˆ›å»ºæ–‡ä»¶ã€ç›®å½•çš„åˆ†äº«é“¾æ¥ï¼Œå¯è®¾å®šè‡ªåŠ¨è¿‡æœŸ
 - ğŸ‘ï¸â€ğŸ—¨ï¸ è§†é¢‘ã€å›¾åƒã€éŸ³é¢‘ã€æ–‡æœ¬ã€Office æ–‡æ¡£åœ¨çº¿é¢„è§ˆ
 - ğŸ¨ è‡ªå®šä¹‰é…è‰²ã€é»‘æš—æ¨¡å¼ã€PWA åº”ç”¨ã€å…¨ç«™å•é¡µåº”ç”¨
 - ğŸš€ All-In-One æ‰“åŒ…ï¼Œå¼€ç®±å³ç”¨

## Aria2 ä¸‹è½½
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507151021.png)

## Jellyfin æµåª’ä½“ä¸­å¿ƒ
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507170746.png)
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507171004.png)

## Bitwarden ä¸ªäººå¯†ç ç®¡ç†
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210515001748.png)
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210515002020.png)

## Netdata æ€§èƒ½å®æ—¶ç›‘æµ‹
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/14593444055368.gif)

## Gitea ä»£ç ä»“åº“
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507153030.png)

## Nexus3 ç§æœ
![](https://cdn.jsdelivr.net/gh/kimentanm/image-store/img/20210507151319.png)

## æ•°æ®å¤‡ä»½
åˆ›å»ºLinuxå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ™šä¸Šå‡Œæ™¨4ç‚¹æ‰§è¡Œå¤‡ä»½è„šæœ¬
å°†é‡è¦çš„dockerå®¹å™¨æ•°æ®å·å‹ç¼©æˆzipåŒ…ï¼Œå¹¶ä¸Šä¼ åˆ°è…¾è®¯äº‘è½»é‡çº§åº”ç”¨æœåŠ¡ä¸Š
```bash
# Example of job definition:
# .---------------- minute (0 - 59)
# |  .------------- hour (0 - 23)
# |  |  .---------- day of month (1 - 31)
# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# |  |  |  |  |
# *  *  *  *  * user-name  command to be executed
  0  4  *  *  * /root/backup.sh
```
```bash
# å¤‡ä»½cloudreve
echo 'Start backup cloudreve'
rm -rf /kimen/backup/cloudreve/cloudreve-backup.zip.bak
mv /kimen/backup/cloudreve/cloudreve-backup.zip /kimen/backup/cloudreve/cloudreve-backup.zip.bak
zip -r /kimen/backup/cloudreve/cloudreve-backup.zip /kimen/docker/volumes/cloudreve > /dev/null 2>&1
echo 'Backup cloudreve success'

echo 'Start transfer backup files to cloud'
scp -r /kimen/backup root@xx.xx.xx.xx:/home/
echo 'Transfer backup files to cloud success'
```

---
title: å½“ã€Embyã€Plexã€Jellyfinã€é‡ä¸Šã€é˜¿é‡Œäº‘ç›˜ã€ğŸ¬
date: 2021-08-17 20:50:42
permalink: /pages/5ee34a/
categories:
  - æ›´å¤š
  - æŠ˜è…¾
tags:
  -
---
![](https://img.whalenas.com:283/image/202108181444671.png)

<!-- more -->

> æ­¤æ•™ç¨‹é»˜è®¤ä½ å·²ç»è‡ªå·±æ­å»ºè¿‡Embyã€Plexã€Jellyfinç­‰æµåª’ä½“æœåŠ¡ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹æ­å»ºæµåª’ä½“æœåŠ¡åšè®²è§£
## ä¸‰æ­¥èµ°
1. é˜¿é‡Œäº‘ç›˜é…ç½®WebdavæœåŠ¡
2. é€šè¿‡rcloneå°†é˜¿é‡Œäº‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°
3. æµåª’ä½“æœåŠ¡ï¼ˆEmbyã€Plexã€Jellyfinï¼‰é…ç½®åª’ä½“åº“

## é…ç½®é˜¿é‡Œäº‘ç›˜WebdavæœåŠ¡
è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥çœ‹è¿™ç¯‡åšå®¢ï¼š[å½“Infuseé‡ä¸Šé˜¿é‡Œäº‘ç›˜](https://blog.kimen.com.cn/pages/9b3f3a/)

## rcloneæŒ‚è½½é˜¿é‡Œäº‘ç›˜
ä½¿ç”¨çš„dockeré•œåƒï¼š[mumiehub/rclone-mount](https://registry.hub.docker.com/r/mumiehub/rclone-mount)

### ä½¿ç”¨docker-compose
åˆ›å»ºdocker-compose.ymlæ–‡ä»¶
```ymal
version: '3'
services:
  rclone-aliyun:
    image: mumiehub/rclone-mount
    container_name: rclone-aliyun
    restart: always
    cap_add:
      - SYS_ADMIN
    devices:
      - /dev/fuse
    security_opt:
      - apparmor:unconfined
    volumes:
      - <your path>/rclone-aliyun/config:/root/.config/rclone
      - <your path>/rclone-aliyun/aliyun:/mnt/mediaefs:shared
    environment:
      - RemotePath=<your remote path>
      - ConfigDir=/root/.config/rclone
      - ConfigName=rclone.conf
      - MountCommands=--allow-other --allow-non-empty
```

### docker-compose.ymlè§£é‡Š
|  é…ç½®é¡¹   | è§£é‡Š  |
|  ---  | ---  |
| /root/.config/rclone  | rcloneé…ç½®æ–‡ä»¶ä½ç½®ï¼Œæ–‡ä»¶åä¸ºrclone.conf |
| /mnt/mediaefs:shared  | æŒ‚è½½ç›˜ä½ç½® |
| RemotePath  | aliyun:movieï¼Œaliyunæ˜¯æŒ‚è½½åï¼Œmovieæ˜¯ç½‘ç›˜ä¸­çš„åœ°å€ |
> å…¶ä»–çš„é…ç½®å¯ä»¥ä¸ç”¨å˜

### åˆ›å»ºrclone.confé…ç½®æ–‡ä»¶
åˆ›å»ºé…ç½®æ–‡ä»¶æœ‰ä¸¤ç§æ–¹å¼ï¼š
1. åœ¨å·²å®‰è£…æœ‰rcloneçš„æœºå™¨ä¸Šåˆ›å»ºé…ç½®æ–‡ä»¶
2. è¿›å…¥å®¹å™¨å†…éƒ¨åˆ›å»º

æˆ‘ä»¬è¿™è¾¹é€‰æ‹©ç¬¬äºŒç§æ–¹å¼
#### è¿›å…¥å®¹å™¨å†…éƒ¨
```shell
docker exec -it rclone-aliyun sh
```
#### åˆ›å»ºé…ç½®
è¾“å…¥å‘½ä»¤`rclone config`åå‡ºç°è¿™ä¸ªç•Œé¢
```shell
e) Edit existing remote			#ç¼–è¾‘å·²æœ‰çš„è¿œç¨‹æŒ‚è½½ç‚¹
n) New remote					#æ–°æŒ‚è½½
d) Delete remote				#åˆ é™¤æŒ‚è½½
r) Rename remote				#é‡å‘½åæŒ‚è½½
c) Copy remote					#ä¸ºå·²æœ‰æŒ‚è½½å»ºç«‹ä¸€ä¸ªå‰¯æœ¬
s) Set configuration password	#è®¾ç½®é…ç½®å¯†ç 
q) Quit config					#é€€å‡ºé…ç½®
e/n/d/r/c/s/q> # è¾“å…¥nåˆ›å»ºæ–°çš„æŒ‚è½½
```
è¾“å…¥`n`åˆ›å»ºæ–°çš„æŒ‚è½½
```shell
name> # ç»™ä½ çš„æŒ‚è½½å–ä¸ªåå­—ï¼Œè¿™é‡Œæˆ‘å–çš„æ˜¯aliyun
```
ç„¶åä¼šå‡ºç°ä¸€å †é€‰é¡¹ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ç±»åˆ«ï¼Œè¿™é‡Œæˆ‘ä»¬è¾“å…¥webdav
```shell
Storage> webdav
```
```shell
URL of http host to connect to
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value
 1 / Connect to example.com
   \ "https://example.com"
url> # è¾“å…¥æœåŠ¡å•†ç»™çš„webdavåœ°å€ï¼Œå¦‚æˆ‘çš„åœ°å€æ˜¯http://home-linx:1234
```
```shell
Name of the Webdav site/service/software you are using
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value
 1 / Nextcloud
   \ "nextcloud"
 2 / Owncloud
   \ "owncloud"
 3 / Sharepoint
   \ "sharepoint"
 4 / Other site/service or software
   \ "other"
vendor> # è¾“å…¥ç±»å‹ï¼Œè¿™é‡Œæˆ‘ä»¬è¾“å…¥other
```
```shell
User name
Enter a string value. Press Enter for the default ("").
user> # è¾“å…¥webdavæœåŠ¡çš„ç”¨æˆ·å
```
```shell
Password.
y) Yes type in my own password
g) Generate random password
n) No leave this optional password blank (default)
y/g/n> # è¾“å…¥yä¹‹åè¾“å…¥å¯†ç ï¼Œå¹¶ç¡®è®¤å¯†ç 
```
```shell
Bearer token instead of user/pass (eg a Macaroon)
Enter a string value. Press Enter for the default ("").
bearer_token> # è¾“å…¥ä¸€ä¸ªå£ä»¤ç”¨æ¥ä»£æ›¿è¾“å…¥ç¹ççš„å¯†ç 
```
```shell
Edit advanced config? (y/n)
y) Yes
n) No (default)
y/n> # è¿™é‡Œå¯ä»¥ç›´æ¥å›è½¦
```
æœ€åç¡®è®¤é…ç½®é¡¹ï¼Œè¾“å…¥qé€€å‡ºå³å¯ã€‚

### é‡å¯å®¹å™¨
```shell
docker-compose restart # æˆ–è€…docker-compose up --force-recreate -d
```

### æ£€éªŒæ˜¯å¦æŒ‚è½½æˆåŠŸ
1. è¿›å…¥æŒ‚è½½çš„æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å†…å®¹
2. è¾“å…¥å‘½ä»¤`df -h`ï¼ŒæŸ¥çœ‹æ˜¯å¦å¤šäº†ä¸€ä¸ªå®¹é‡ä¸º1PBçš„ç£ç›˜

## æµåª’ä½“è½¯ä»¶æ·»åŠ åª’ä½“åº“
æˆ‘ä»¬è¿™é‡Œä»¥`Jellyfin`ä¸ºä¾‹ï¼Œ`Emby`å’Œ`Plex`æ˜¯ç±»ä¼¼çš„
åœ¨åª’ä½“åº“è®¾ç½®ä¸­å°†æ–‡ä»¶åº“çš„ä½ç½®é€‰æ‹©æŒ‚è½½å¥½çš„é˜¿é‡Œç½‘ç›˜å³å¯ï¼Œç„¶åå°±æ­£å¸¸çš„æ‰«ææœåˆ®
![](https://img.whalenas.com:283/image/202108181413809.png)
æœåˆ®å®Œä¹‹åï¼Œ`Jellyfin`å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œé˜¿é‡Œäº‘ç›˜ä¸­ä¹Ÿæœ‰ç›¸åº”çš„æ–‡ä»¶
![](https://img.whalenas.com:283/image/202108181444671.png)
![](https://img.whalenas.com:283/image/202108181416948.png)
